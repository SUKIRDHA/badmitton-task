<!DOCTYPE html>
<html lang="en">
    <head>
    <title>Badminton league</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
    <h1>üè∏Welcome to the badminton league!</h1>

    <nav>
        <ul>
           <a href="#section1">Players Management</a> 
      <a href="#section2">Match Tracking</a>
 <a href="#section3">Leaderboard / Stats</a>
        
</ul>
    </nav>
</header>

<section id="section1">
 
        
    <h1>Players Management</h1>

    </header>
    <input type="number" id="playerId" placeholder="Enter id of the player">
    <input type="text" id="playerName" placeholder="Enter player name">
    <select id="result">
        <option value="" disabled>Select a result</option>
        <option value="wins">win</option>
        <option value="losses">loss</option>
        </select>
    <button id="addPlayer">Add Player</button>
    <button id="removePlayer">Remove Player</button>
    <h2>Players List</h2>
    <ul id="playersList"></ul>
</section>
<section id="section2">
    <h2>
        Result of a match
    </h2>
    <input type="text" id="player1" placeholder="Enter Name of the Winner">
    <input type="text" id="player2" placeholder="Enter Name of the Loser">
    <button id="addresult">Add Result</button>
</section>
<section id="section3">
    <h2>Number of Wins and losses per player</h2>
    <table id="leaderboardTable" border="1">
        <thead>
            <tr>
                <th>Player</th>
                <th>Wins</th>
                <th>Losses</th>
            </tr>
        </thead>
        <tbody id="leaderboard">

        </tbody>
    </section>
</body>
 </section>
<script>document.getElementById("addPlayer").addEventListener("click", function() {
    const id = document.getElementById("playerId").value;
    const playerName = document.getElementById("playerName").value;
    const results= document.getElementById("result").value;
    const details={
        Id:id,
        playername:playerName,
        results:results
    }
    if (playerName && id) {
        const playerList = document.getElementById("playersList");
        const newPlayer = document.createElement("li");
        newPlayer.textContent = `${id}   ${playerName}`;
        playerList.appendChild(newPlayer);

        document.getElementById("playerId").value = "";
        document.getElementById("playerName").value = "";
    } else {
        alert("Please enter player id and name ");
    }
    fetch("http://localhost:5000/player",{
            method:"POST",
            headers:{
                "Content-Type":"application/json"
            },
        body:JSON.stringify(details)
        })
        .then(response => {
            if (response.ok) {
                console.log("Player added successfully");
        }
        else{
            console.error("Error adding player");
        }     
        })
        fetch("http://localhost:5000/player/getdata",{
            method:"GET",
            headers:{
                "Content-Type":"application/json"
            },
        body:JSON.stringify(details)
        })
        .then(respone=> {
            if (response.ok) {
                console.log("Player data retrieved successfully");
        }
        
        else{
            console.error("Error retrieving player data");
        }     
        })
        fetch("http://localhost:5000/player/update",{
            method:"PUT",
            headers:{
                "Content-Type":"application/json"
            },
        body:JSON.stringify(details)})
        fetch("http://localhost:5000/player/delete",{
            method:"DELETE",
            headers:{
                "Content-Type":"application/json"
            },
        body:JSON.stringify(details)})
        let data = JSON.parse(localStorage.getItem("info")) || [];
   data.push(details);
    localStorage.setItem("info", JSON.stringify(data));
    console.log("Data stored in JSON");
    console.log(data);
    console.log("Form submitted successfully!");
})
document.getElementById("removePlayer").addEventListener("click", function() {
    const playerList = document.getElementById("playersList");
    const playerName = document.getElementById("playerName").value;
    const playerId = document.getElementById("playerId").value;
    const players = playerList.getElementsByTagName("li");
    let a = false;
    for (let i = 0; i < players.length; i++) {
        if (players[i].textContent.includes(playerName) && players[i].textContent.includes(playerId)) {            playerList.removeChild(players[i]);
            a= true;
            break;
        }
    }
})

    </script>
        <script src="app.js"></script>

</html>